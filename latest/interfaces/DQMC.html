<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>DQMC · MonteCarlo.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>MonteCarlo.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../manual/gettingstarted.html">Getting started</a></li><li><a class="toctext" href="../manual/examples.html">Examples</a></li></ul></li><li><span class="toctext">Physical models</span><ul><li><a class="toctext" href="../models/ising.html">Ising model</a></li><li><a class="toctext" href="../models/hubbardattractive.html">Attractive Hubbard model</a></li></ul></li><li><span class="toctext">Monte Carlo flavors</span><ul><li><a class="toctext" href="../flavors/mc.html">MC</a></li><li><a class="toctext" href="../flavors/dqmc.html">DQMC</a></li></ul></li><li><a class="toctext" href="../lattices.html">Lattices</a></li><li><a class="toctext" href="../customize.html">Customize</a></li><li><span class="toctext">Methods</span><ul><li><a class="toctext" href="../methods/general.html">General</a></li></ul></li><li><span class="toctext">Interfaces</span><ul><li><a class="toctext" href="MC.html">MC</a></li><li class="current"><a class="toctext" href="DQMC.html">DQMC</a><ul class="internal"><li><a class="toctext" href="#Mandatory-fields-1">Mandatory fields</a></li><li><a class="toctext" href="#Index-of-all-methods-1">Index of all methods</a></li><li><a class="toctext" href="#Mandatory-methods-1">Mandatory methods</a></li><li><a class="toctext" href="#Optional-methods-1">Optional methods</a></li></ul></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Interfaces</li><li><a href="DQMC.html">DQMC</a></li></ul><a class="edit-page" href="https://github.com/crstnbr/MonteCarlo.jl/blob/master/docs/src/interfaces/DQMC.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>DQMC</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Interface:-Determinant-Quantum-Monte-Carlo-(DQMC)-1" href="#Interface:-Determinant-Quantum-Monte-Carlo-(DQMC)-1">Interface: Determinant Quantum Monte Carlo (DQMC)</a></h1><p>Any model that wants to be simulated by means of DQMC must implement the following interface. Below you find all semantic definitions and precise signatures of mandatory fields and mandatory and optional methods that any model should implement to work with the determinant Monte Carlo flavor <a href="../flavors/dqmc.html#Determinant-Quantum-Monte-Carlo-(DQMC)-1">Determinant Quantum Monte Carlo (DQMC)</a>.</p><p>Example models: <a href="interfaces/@ref">Attractive Hubbard model</a></p><h2><a class="nav-anchor" id="Mandatory-fields-1" href="#Mandatory-fields-1">Mandatory fields</a></h2><ul><li><p><code>l::Lattice</code>: any <a href="../lattices.html#Lattices-1"><code>Lattice</code></a></p></li><li><p><code>flv::Int</code>: number of distinct fermion flavors (e.g. spins, bands, etc.). The Green&#39;s function will have shape <code>(flv*N, flv*N)</code>, where <code>N</code> is the number of sites. Note that different fermion flavors are often related by symmetry and it&#39;s advisable to use this symmetry to work with smaller Green&#39;s function matrices. Have a look at the <a href="../models/hubbardattractive.html#Attractive-Hubbard-Model-1">Attractive Hubbard Model</a> as an example where <code>flv=1</code> although we have spinful fermions.</p></li></ul><h2><a class="nav-anchor" id="Index-of-all-methods-1" href="#Index-of-all-methods-1">Index of all methods</a></h2><ul><li><a href="DQMC.html#Base.Random.rand-Tuple{MonteCarlo.DQMC,MonteCarlo.Model}"><code>Base.Random.rand</code></a></li><li><a href="DQMC.html#MonteCarlo.accept_local-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Int64,Int64,Any,Any,Any,Any}"><code>MonteCarlo.accept_local</code></a></li><li><a href="DQMC.html#MonteCarlo.conftype-Tuple{Type{MonteCarlo.DQMC},MonteCarlo.Model}"><code>MonteCarlo.conftype</code></a></li><li><a href="DQMC.html#MonteCarlo.energy_boson-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Any}"><code>MonteCarlo.energy_boson</code></a></li><li><a href="DQMC.html#MonteCarlo.finish_observables!-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Dict{String,MonteCarloObservable.Observable}}"><code>MonteCarlo.finish_observables!</code></a></li><li><a href="DQMC.html#MonteCarlo.greenseltype-Tuple{Type{MonteCarlo.DQMC},MonteCarlo.Model}"><code>MonteCarlo.greenseltype</code></a></li><li><a href="DQMC.html#MonteCarlo.hopping_matrix-Tuple{MonteCarlo.DQMC,MonteCarlo.Model}"><code>MonteCarlo.hopping_matrix</code></a></li><li><a href="DQMC.html#MonteCarlo.interaction_matrix_exp!"><code>MonteCarlo.interaction_matrix_exp!</code></a></li><li><a href="DQMC.html#MonteCarlo.measure_observables!-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Dict{String,MonteCarloObservable.Observable},Any,Float64}"><code>MonteCarlo.measure_observables!</code></a></li><li><a href="DQMC.html#MonteCarlo.prepare_observables-Tuple{MonteCarlo.DQMC,MonteCarlo.Model}"><code>MonteCarlo.prepare_observables</code></a></li><li><a href="DQMC.html#MonteCarlo.propose_local-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Int64,Any,Float64}"><code>MonteCarlo.propose_local</code></a></li></ul><h2><a class="nav-anchor" id="Mandatory-methods-1" href="#Mandatory-methods-1">Mandatory methods</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MonteCarlo.conftype-Tuple{Type{MonteCarlo.DQMC},MonteCarlo.Model}" href="#MonteCarlo.conftype-Tuple{Type{MonteCarlo.DQMC},MonteCarlo.Model}"><code>MonteCarlo.conftype</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">conftype(::Type{DQMC}, m::Model)</code></pre><p>Returns the type of a configuration.</p></div><a class="source-link" target="_blank" href="https://github.com/crstnbr/MonteCarlo.jl/blob/33976844183f01ccd40714eaafe03d9dd1f2441b/src/flavors/DQMC/DQMC_mandatory.jl#L1-L5">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.Random.rand-Tuple{MonteCarlo.DQMC,MonteCarlo.Model}" href="#Base.Random.rand-Tuple{MonteCarlo.DQMC,MonteCarlo.Model}"><code>Base.Random.rand</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">rand(mc::DQMC, m::Model)</code></pre><p>Draw random configuration.</p></div><a class="source-link" target="_blank" href="https://github.com/crstnbr/MonteCarlo.jl/blob/33976844183f01ccd40714eaafe03d9dd1f2441b/src/flavors/DQMC/DQMC_mandatory.jl#L9-L13">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MonteCarlo.hopping_matrix-Tuple{MonteCarlo.DQMC,MonteCarlo.Model}" href="#MonteCarlo.hopping_matrix-Tuple{MonteCarlo.DQMC,MonteCarlo.Model}"><code>MonteCarlo.hopping_matrix</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">hopping_matrix(mc::DQMC, m::Model)</code></pre><p>Calculates the hopping matrix $ T_{i\sigma, j\sigma &#39;} $ where $ i, j $ are site indices and $ \sigma , \sigma &#39; $ are flavor indices (e.g. spin indices). The hopping matrix should also contain potential chemical potential terms on the diagonal.</p><p>A matrix element is the hopping amplitude for a hopping process: $ j,\sigma &#39; \rightarrow i,\sigma $.</p><p>Regarding the order of indices, if <code>T[i, σ, j, σ&#39;]</code> is your desired 4D hopping array, then <code>reshape(T, (n_sites * n_flavors, :))</code> is the hopping matrix.</p></div><a class="source-link" target="_blank" href="https://github.com/crstnbr/MonteCarlo.jl/blob/33976844183f01ccd40714eaafe03d9dd1f2441b/src/flavors/DQMC/DQMC_mandatory.jl#L16-L27">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MonteCarlo.interaction_matrix_exp!" href="#MonteCarlo.interaction_matrix_exp!"><code>MonteCarlo.interaction_matrix_exp!</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">interaction_matrix_exp!(mc::DQMC, m::Model, result::Matrix, conf, slice::Int, power::Float64=1.) -&gt; nothing</code></pre><p>Calculate the interaction matrix exponential <code>expV = exp(- power * delta_tau * V(slice))</code> and store it in <code>result::Matrix</code>. Potential chemical potential terms should be part of the <code>hopping_matrix</code> and not the interaction.</p><p>This is a performance critical method and one might consider efficient in-place (in <code>result</code>) construction.</p></div><a class="source-link" target="_blank" href="https://github.com/crstnbr/MonteCarlo.jl/blob/33976844183f01ccd40714eaafe03d9dd1f2441b/src/flavors/DQMC/DQMC_mandatory.jl#L30-L38">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MonteCarlo.propose_local-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Int64,Any,Float64}" href="#MonteCarlo.propose_local-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Int64,Any,Float64}"><code>MonteCarlo.propose_local</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">propose_local(mc::DQMC, m::Model, i::Int, conf, E_boson::Float64) -&gt; detratio, delta_E_boson, delta</code></pre><p>Propose a local move for lattice site <code>i</code> of current configuration <code>conf</code> with boson energy <code>E_boson</code>. Returns the Green&#39;s function determinant ratio, the boson energy difference <code>delta_E_boson = delta_E_boson_new - delta_E_boson</code>, and additional local move information <code>delta</code> (will be forwarded to <code>accept_local!</code>).</p><p>See also <a href="MC.html#MonteCarlo.accept_local!-Tuple{MonteCarlo.MC,MonteCarlo.Model,Int64,Any,Float64,Any,Float64}"><code>accept_local!</code></a>.</p></div><a class="source-link" target="_blank" href="https://github.com/crstnbr/MonteCarlo.jl/blob/33976844183f01ccd40714eaafe03d9dd1f2441b/src/flavors/DQMC/DQMC_mandatory.jl#L42-L52">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MonteCarlo.accept_local-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Int64,Int64,Any,Any,Any,Any}" href="#MonteCarlo.accept_local-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Int64,Int64,Any,Any,Any,Any}"><code>MonteCarlo.accept_local</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">accept_local(mc::DQMC, m::Model, i::Int, slice::Int, conf, delta, detratio, delta_E_boson)</code></pre><p>Accept a local move for site <code>i</code> at imaginary time slice <code>slice</code> of current configuration <code>conf</code> with energy <code>E</code>. Arguments <code>delta</code>, <code>detratio</code> and <code>delta_E_boson</code> correspond to output of <code>propose_local()</code> for that local move.</p><p>See also <a href="MC.html#MonteCarlo.propose_local-Tuple{MonteCarlo.MC,MonteCarlo.Model,Int64,Any,Float64}"><code>propose_local</code></a>.</p></div><a class="source-link" target="_blank" href="https://github.com/crstnbr/MonteCarlo.jl/blob/33976844183f01ccd40714eaafe03d9dd1f2441b/src/flavors/DQMC/DQMC_mandatory.jl#L55-L63">source</a></section><h2><a class="nav-anchor" id="Optional-methods-1" href="#Optional-methods-1">Optional methods</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MonteCarlo.greenseltype-Tuple{Type{MonteCarlo.DQMC},MonteCarlo.Model}" href="#MonteCarlo.greenseltype-Tuple{Type{MonteCarlo.DQMC},MonteCarlo.Model}"><code>MonteCarlo.greenseltype</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">greenseltype(::Type{DQMC}, m::Model)</code></pre><p>Returns the type of the elements of the Green&#39;s function matrix. Defaults to <code>Complex128</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/crstnbr/MonteCarlo.jl/blob/33976844183f01ccd40714eaafe03d9dd1f2441b/src/flavors/DQMC/DQMC_optional.jl#L1-L5">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MonteCarlo.energy_boson-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Any}" href="#MonteCarlo.energy_boson-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Any}"><code>MonteCarlo.energy_boson</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">energy(mc::DQMC, m::Model, conf)</code></pre><p>Calculate bosonic part (non-Green&#39;s function determinant part) of energy for configuration <code>conf</code> for Model <code>m</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/crstnbr/MonteCarlo.jl/blob/33976844183f01ccd40714eaafe03d9dd1f2441b/src/flavors/DQMC/DQMC_optional.jl#L8-L12">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MonteCarlo.prepare_observables-Tuple{MonteCarlo.DQMC,MonteCarlo.Model}" href="#MonteCarlo.prepare_observables-Tuple{MonteCarlo.DQMC,MonteCarlo.Model}"><code>MonteCarlo.prepare_observables</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">prepare_observables(mc::DQMC, m::Model) -&gt; Dict{String, Observable}</code></pre><p>Initializes observables and returns a <code>Dict{String, Observable}</code>. In the latter, keys are abbreviations for the observables names and values are the observables themselves.</p><p>See also <a href="MC.html#MonteCarlo.measure_observables!-Tuple{MonteCarlo.MC,MonteCarlo.Model,Dict{String,MonteCarloObservable.Observable},Any,Float64}"><code>measure_observables!</code></a> and <a href="MC.html#MonteCarlo.finish_observables!-Tuple{MonteCarlo.MC,MonteCarlo.Model,Dict{String,MonteCarloObservable.Observable}}"><code>finish_observables!</code></a>.</p></div><a class="source-link" target="_blank" href="https://github.com/crstnbr/MonteCarlo.jl/blob/33976844183f01ccd40714eaafe03d9dd1f2441b/src/flavors/DQMC/DQMC_optional.jl#L15-L22">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MonteCarlo.measure_observables!-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Dict{String,MonteCarloObservable.Observable},Any,Float64}" href="#MonteCarlo.measure_observables!-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Dict{String,MonteCarloObservable.Observable},Any,Float64}"><code>MonteCarlo.measure_observables!</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">measure_observables!(mc::DQMC, m::Model, obs::Dict{String,Observable}, conf, E::Float64)</code></pre><p>Measures observables and updates corresponding <code>MonteCarloObservable.Observable</code> objects in <code>obs</code>.</p><p>See also <a href="MC.html#MonteCarlo.prepare_observables-Tuple{MonteCarlo.MC,MonteCarlo.Model}"><code>prepare_observables</code></a> and <a href="MC.html#MonteCarlo.finish_observables!-Tuple{MonteCarlo.MC,MonteCarlo.Model,Dict{String,MonteCarloObservable.Observable}}"><code>finish_observables!</code></a>.</p></div><a class="source-link" target="_blank" href="https://github.com/crstnbr/MonteCarlo.jl/blob/33976844183f01ccd40714eaafe03d9dd1f2441b/src/flavors/DQMC/DQMC_optional.jl#L25-L31">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MonteCarlo.finish_observables!-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Dict{String,MonteCarloObservable.Observable}}" href="#MonteCarlo.finish_observables!-Tuple{MonteCarlo.DQMC,MonteCarlo.Model,Dict{String,MonteCarloObservable.Observable}}"><code>MonteCarlo.finish_observables!</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">measure_observables!(mc::DQMC, m::Model, obs::Dict{String,Observable}, conf, E::Float64)</code></pre><p>Measure observables and update corresponding <code>MonteCarloObservable.Observable</code> objects in <code>obs</code>.</p><p>See also <a href="MC.html#MonteCarlo.prepare_observables-Tuple{MonteCarlo.MC,MonteCarlo.Model}"><code>prepare_observables</code></a> and <a href="MC.html#MonteCarlo.measure_observables!-Tuple{MonteCarlo.MC,MonteCarlo.Model,Dict{String,MonteCarloObservable.Observable},Any,Float64}"><code>measure_observables!</code></a>.</p></div><a class="source-link" target="_blank" href="https://github.com/crstnbr/MonteCarlo.jl/blob/33976844183f01ccd40714eaafe03d9dd1f2441b/src/flavors/DQMC/DQMC_optional.jl#L34-L40">source</a></section><footer><hr/><a class="previous" href="MC.html"><span class="direction">Previous</span><span class="title">MC</span></a></footer></article></body></html>
